# Render.com Optimized Deployment Configuration
# Simplified version for reliable deployment with minimal dependencies

services:
  - type: web
    name: jain-trading-bot
    env: python
    buildCommand: pip install -r render-requirements.txt
    startCommand: python render-app.py
    plan: free  # 100% FREE tier
    
    # Environment variables (set these in Render dashboard)
    envVars:
      - key: SLACK_BOT_TOKEN
        sync: false  # Set manually: xoxb-your-bot-token
      - key: SLACK_SIGNING_SECRET
        sync: false  # Set manually: your-signing-secret
      - key: ENVIRONMENT
        value: production
      - key: PORT
        value: 8080
      - key: HOST
        value: 0.0.0.0
      
      # Optional: Add these for enhanced functionality
      - key: FINNHUB_API_KEY
        sync: false  # Optional: for real market data
      - key: ALPACA_API_KEY
        sync: false  # Optional: for real paper trading
      - key: ALPACA_SECRET_KEY
        sync: false  # Optional: for real paper trading
      - key: DATABASE_URL
        sync: false  # Optional: will use PostgreSQL if available
    
    # Health check endpoint
    healthCheckPath: /health
    
    # Auto-deploy from GitHub
    autoDeploy: true
    
    # Build settings
    buildFilter:
      paths:
        - render-app.py
        - render-requirements.txt
        - render-optimized.yaml
      ignoredPaths:
        - docs/**
        - tests/**
        - scripts/**
        - logs/**
        - "*.md"

# Optional: Add PostgreSQL database for persistent storage
# Uncomment if you want to use a database instead of in-memory storage
#
# databases:
#   - name: jain-trading-db
#     databaseName: trading_bot
#     user: trading_user
#     plan: free